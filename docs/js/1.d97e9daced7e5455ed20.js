webpackJsonp([1],{168:function(t,e,s){function a(t){s(187)}var o=s(129)(s(175),s(193),a,null,null);t.exports=o.exports},171:function(t,e,s){"use strict";function a(t,e){console.log("Failed to load JIRA data"),console.log(t),e.commit("ERRORED_LOADING"),e.callback.FAILcallback.method(t,e.callback.FAILcallback.params)}function o(t,e,s,o){var n={OKcallback:{method:function(t,s){for(var a=[],o=0;o<t.length;o++){var n=t[o].fields.customfield_10800,c=t[o].key,l=0;null==t[o].fields.customfield_10004?s.exceptions=r(s.exceptions,t[o].key,"User Story without estimate"):l=t[o].fields.customfield_10004;var u={id:t[o].id,key:c,summary:t[o].fields.summary,description:t[o].fields.description,epickey:n,tasks:[],status:t[o].fields.status.name,label_text:"FILLED IN LATER",story_points:l,summedStoryPoints:0,summedBurnedStoryPoints:0,rank:t[o].fields.customfield_11000};e[n].user_stories[t[o].key]=u,a[c]=n}i(s.commit,e,a,s.callback,s.exceptions)},params:{commit:t,callback:s,exceptions:o}},FAILcallback:{method:a,params:{commit:t,callback:s,exceptions:o}}};l.a.dispatch("query",{jql:"project+%3D+SPI+AND+issuetype+%3D+Story+ORDER+BY+KEY",callback:n})}function r(t,e,s){return t.push({key:e,msg:s}),t}function i(t,e,s,o,i){var n={OKcallback:{method:function(t,e){console.log("Task query response"),console.log(t);for(var a=0;a<t.length;a++)if(void 0===t[a].fields.customfield_11101||null===t[a].fields.customfield_11101)e.exceptions=r(e.exceptions,t[a].key,"Task without userstorykey set");else for(var o=0;o<t[a].fields.customfield_11101.length;o++){var i=t[a].fields.customfield_11101[o];if(void 0===i)e.exceptions=r(e.exceptions,t[a].key,"Task without invalid userstorykey set");else{var n=s[i];e.epics[n].user_stories[i].tasks[t[a].key]={id:t[a].id,key:t[a].key,summary:t[a].fields.summary,description:t[a].fields.description,status:t[a].fields.status.name,story_points:t[a].fields.customfield_10004,rank:t[a].fields.customfield_11000}}}e.commit("SAVE_EPICS",{epics:e.epics,exceptions:e.exceptions}),e.commit("COMPLETED_LOADING"),e.callback.OKcallback.method({msg:"OK"},e.callback.OKcallback.params)},params:{commit:t,callback:o,epics:e,exceptions:i}},FAILcallback:{method:a,params:{commit:t,callback:o,epics:e,exceptions:i}}};l.a.dispatch("query",{jql:"project+%3D+SPI+AND+issuetype+%3D+Task+ORDER+BY+KEY",callback:n})}var n=s(2),c=s(4),l=s(130),u={state:0,epics:[],exceptions:[],project:{progressPercantage:0}},d={START_LOADING:function(t){t.state=1},COMPLETED_LOADING:function(t){t.state=2},ERRORED_LOADING:function(t){t.state=3},SAVE_EPICS:function(t,e){t.epics=[];var s=e.epics,a=0,o=0;for(var i in s){var n=0,c=[];if(void 0!==s[i].key){var l=0,u=0;for(var d in s[i].user_stories){n++;var p=s[i].user_stories[d],m=[],k=p.story_points,f=0,_=0,v=0,h=0;for(var b in s[i].user_stories[d].tasks)v++,null!==s[i].user_stories[d].tasks[b].story_points&&h++,null!==f&&(null===s[i].user_stories[d].tasks[b].story_points?f=null:("Done"===s[i].user_stories[d].tasks[b].status&&(_+=s[i].user_stories[d].tasks[b].story_points),f+=s[i].user_stories[d].tasks[b].story_points)),m.push(s[i].user_stories[d].tasks[b]);h!==v&&(e.exceptions=r(e.exceptions,s[i].user_stories[d].key,"Epic with some but not all Tasks estimated")),0===v?(f=null,s[i].user_stories[d].summedStoryPoints=p.story_points,s[i].user_stories[d].summedBurnedStoryPoints=0):(s[i].user_stories[d].summedStoryPoints=f,s[i].user_stories[d].summedBurnedStoryPoints=_,m=m.sort(function(t,e){return t.rank===e.rank?0:t.rank<e.rank?-1:1})),s[i].user_stories[d].tasks=m,null!==f&&0!==f&&(k=_+"/"+f+" ",k+=Math.round(100*_/f),k+="%"),s[i].user_stories[d].label_text=k+" - "+p.key+" ("+p.status+") "+p.summary,l+=f,u+=_,c.push(s[i].user_stories[d])}s[i].summedStoryPoints=l,s[i].summedBurnedStoryPoints=u,n>1&&(c=c.sort(function(t,e){return t.rank===e.rank?0:t.rank<e.rank?-1:1})),s[i].user_stories=c,t.epics.push(s[i]),a+=l,o+=u}t.project.progressPercantage=0===a?0:Math.round(100*o/a),t.exceptions=e.exceptions}t.epics=t.epics.sort(function(t,e){return t.rank===e.rank?0:t.rank<e.rank?-1:1})}},p={status_txt:function(t,e){return 0===t.state?"Created":1===t.state?"Loading":2===t.state?"Loaded":3===t.state?"Error":"Unknown"},epics:function(t,e){return t.epics},exceptions:function(t,e){return t.exceptions},project:function(t,e){return t.project}},m={loadJIRAdata:function(t,e){var s=t.commit;t.state;s("START_LOADING");var r={OKcallback:{method:function(t,e){console.log("START OF DATA STORE");for(var s=[],a=[],r=0;r<t.length;r++)s[t[r].key]={id:t[r].id,key:t[r].key,name:t[r].fields.customfield_10801,user_stories:[],summedStoryPoints:0,summedBurnedStoryPoints:0,rank:t[r].fields.customfield_11000};o(e.commit,s,e.callback,a)},params:{commit:s,callback:e.callback}},FAILcallback:{method:a,params:{commit:s,callback:e.callback}}};l.a.dispatch("query",{jql:"project+%3D+SPI+AND+issuetype+%3D+Epic+ORDER+BY+KEY",callback:r})}};n.a.use(c.a),e.a=new c.a.Store({state:u,mutations:d,getters:p,actions:m})},175:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(131),o=s(171),r=s(5);s.n(r);e.default={data:function(){return{}},computed:{server_info_load_error_data:function(){return a.a.state.server_info_load_error_data},backroute:function(){if("/"===this.$route.path)return"";var t=this.$route.path.split("/"),e="";for(var s in t)s<t.length-1&&(e+="/"+t[s]);return e.substring(1)},pageTitle:function(){return a.a.state.pageTitle}},created:function(){r.Loading.show();var t={OKcallback:{method:function(t,e){r.Loading.hide()},params:{}},FAILcallback:{method:function(t,e){r.Loading.hide(),r.Toast.create('Failed to log in "'+t.msg+'"')},params:{}}};o.a.dispatch("loadJIRAdata",{callback:t})},methods:{refresh:function(){r.Loading.show();var t={OKcallback:{method:function(t,e){r.Loading.hide()},params:{}},FAILcallback:{method:function(t,e){r.Loading.hide(),r.Toast.create('Failed to get data "'+t.msg+'"')},params:{}}};o.a.dispatch("loadJIRAdata",{callback:t})}}}},181:function(t,e,s){e=t.exports=s(163)(void 0),e.push([t.i,".logo-container{width:192px;height:268px;-webkit-perspective:800px;perspective:800px;position:absolute;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%)}.logo{position:absolute;-webkit-transform-style:preserve-3d;transform-style:preserve-3d}",""])},187:function(t,e,s){var a=s(181);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(164)("e54015c8",a,!0)},193:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",[s("div",{staticClass:"toolbar",slot:"header"},[s("button",{staticClass:"hide-on-drawer-visible",on:{click:function(e){t.$refs.drawer.open()}}},[s("i",[t._v("menu")])]),t._v(" "),""!==t.backroute?s("button",{directives:[{name:"go-back",rawName:"v-go-back.single",value:t.backroute,expression:"backroute",modifiers:{single:!0}}],staticClass:"within-iframe-hide"},[s("i",[t._v("arrow_back")])]):t._e(),t._v(" "),s("q-toolbar-title",{attrs:{padding:1}},[t._v("\n        "+t._s(t.pageTitle)+"\n      ")]),t._v(" "),s("button",{on:{click:t.refresh}},[t._v("\n        Refresh\n      ")])],1),t._v(" "),s("q-drawer",{ref:"drawer"},[s("div",{staticClass:"toolbar light"},[s("q-toolbar-title",[t._v("\n          Navigation\n        ")])],1),t._v(" "),s("div",{staticClass:"list no-border platform-delimiter"},[s("q-drawer-link",{attrs:{icon:"home",to:{path:"/",exact:!0}}},[t._v("Home")]),t._v(" "),s("q-drawer-link",{attrs:{icon:"bug_report",to:{path:"/exceptions",exact:!0}}},[t._v("Project Exceptions")]),t._v(" "),s("hr"),t._v(" "),s("q-drawer-link",{attrs:{icon:"group_work",to:{path:"/test",exact:!0}}},[t._v("TEST")]),t._v(" "),s("hr"),t._v(" "),s("q-drawer-link",{attrs:{icon:"exit_to_app",to:{path:"/logout",exact:!0}}},[t._v("\n          Logout\n        ")])],1)]),t._v(" "),s("router-view",{staticClass:"layout-view"}),t._v(" "),s("div",{staticClass:"toolbar",slot:"footer"})],1)},staticRenderFns:[]}}});