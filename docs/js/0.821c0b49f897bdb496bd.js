webpackJsonp([0],{170:function(s,e,t){function o(s){t(189)}var i=t(129)(t(177),t(195),o,null,null);s.exports=i.exports},171:function(s,e,t){"use strict";function o(s,e){console.log("Failed to load JIRA data"),console.log(s),e.commit("ERRORED_LOADING"),e.callback.FAILcallback.method(s,e.callback.FAILcallback.params)}function i(s,e,t,i){var n={OKcallback:{method:function(s,t){for(var o=[],i=0;i<s.length;i++){var n=s[i].fields.customfield_10800,c=s[i].key,u=0;null==s[i].fields.customfield_10004?t.exceptions=r(t.exceptions,s[i].key,"User Story without estimate"):u=s[i].fields.customfield_10004;var l={id:s[i].id,key:c,summary:s[i].fields.summary,description:s[i].fields.description,epickey:n,tasks:[],status:s[i].fields.status.name,label_text:"FILLED IN LATER",story_points:u,summedStoryPoints:0,summedBurnedStoryPoints:0,rank:s[i].fields.customfield_11000};e[n].user_stories[s[i].key]=l,o[c]=n}a(t.commit,e,o,t.callback,t.exceptions)},params:{commit:s,callback:t,exceptions:i}},FAILcallback:{method:o,params:{commit:s,callback:t,exceptions:i}}};u.a.dispatch("query",{jql:"project+%3D+SPI+AND+issuetype+%3D+Story+ORDER+BY+KEY",callback:n})}function r(s,e,t){return s.push({key:e,msg:t}),s}function a(s,e,t,i,a){var n={OKcallback:{method:function(s,e){console.log("Task query response"),console.log(s);for(var o=0;o<s.length;o++)if(void 0===s[o].fields.customfield_11101||null===s[o].fields.customfield_11101)e.exceptions=r(e.exceptions,s[o].key,"Task without userstorykey set");else for(var i=0;i<s[o].fields.customfield_11101.length;i++){var a=s[o].fields.customfield_11101[i];if(void 0===a)e.exceptions=r(e.exceptions,s[o].key,"Task without invalid userstorykey set");else{var n=t[a];e.epics[n].user_stories[a].tasks[s[o].key]={id:s[o].id,key:s[o].key,summary:s[o].fields.summary,description:s[o].fields.description,status:s[o].fields.status.name,story_points:s[o].fields.customfield_10004,rank:s[o].fields.customfield_11000}}}e.commit("SAVE_EPICS",{epics:e.epics,exceptions:e.exceptions}),e.commit("COMPLETED_LOADING"),e.callback.OKcallback.method({msg:"OK"},e.callback.OKcallback.params)},params:{commit:s,callback:i,epics:e,exceptions:a}},FAILcallback:{method:o,params:{commit:s,callback:i,epics:e,exceptions:a}}};u.a.dispatch("query",{jql:"project+%3D+SPI+AND+issuetype+%3D+Task+ORDER+BY+KEY",callback:n})}var n=t(2),c=t(4),u=t(130),l={state:0,epics:[],exceptions:[],project:{progressPercantage:0}},p={START_LOADING:function(s){s.state=1},COMPLETED_LOADING:function(s){s.state=2},ERRORED_LOADING:function(s){s.state=3},SAVE_EPICS:function(s,e){s.epics=[];var t=e.epics,o=0,i=0;for(var a in t){var n=0,c=[];if(void 0!==t[a].key){var u=0,l=0;for(var p in t[a].user_stories){n++;var d=t[a].user_stories[p],m=[],k=d.story_points,f=0,_=0,y=0,v=0;for(var x in t[a].user_stories[p].tasks)y++,null!==t[a].user_stories[p].tasks[x].story_points&&v++,null!==f&&(null===t[a].user_stories[p].tasks[x].story_points?f=null:("Done"===t[a].user_stories[p].tasks[x].status&&(_+=t[a].user_stories[p].tasks[x].story_points),f+=t[a].user_stories[p].tasks[x].story_points)),m.push(t[a].user_stories[p].tasks[x]);v!==y&&(e.exceptions=r(e.exceptions,t[a].user_stories[p].key,"Epic with some but not all Tasks estimated")),0===y?(f=null,t[a].user_stories[p].summedStoryPoints=d.story_points,t[a].user_stories[p].summedBurnedStoryPoints=0):(t[a].user_stories[p].summedStoryPoints=f,t[a].user_stories[p].summedBurnedStoryPoints=_,m=m.sort(function(s,e){return s.rank===e.rank?0:s.rank<e.rank?-1:1})),t[a].user_stories[p].tasks=m,null!==f&&0!==f&&(k=_+"/"+f+" ",k+=Math.round(100*_/f),k+="%"),t[a].user_stories[p].label_text=k+" - "+d.key+" ("+d.status+") "+d.summary,u+=f,l+=_,c.push(t[a].user_stories[p])}t[a].summedStoryPoints=u,t[a].summedBurnedStoryPoints=l,n>1&&(c=c.sort(function(s,e){return s.rank===e.rank?0:s.rank<e.rank?-1:1})),t[a].user_stories=c,s.epics.push(t[a]),o+=u,i+=l}s.project.progressPercantage=0===o?0:Math.round(100*i/o),s.exceptions=e.exceptions}s.epics=s.epics.sort(function(s,e){return s.rank===e.rank?0:s.rank<e.rank?-1:1})}},d={status_txt:function(s,e){return 0===s.state?"Created":1===s.state?"Loading":2===s.state?"Loaded":3===s.state?"Error":"Unknown"},epics:function(s,e){return s.epics},exceptions:function(s,e){return s.exceptions},project:function(s,e){return s.project}},m={loadJIRAdata:function(s,e){var t=s.commit;s.state;t("START_LOADING");var r={OKcallback:{method:function(s,e){console.log("START OF DATA STORE");for(var t=[],o=[],r=0;r<s.length;r++)t[s[r].key]={id:s[r].id,key:s[r].key,name:s[r].fields.customfield_10801,user_stories:[],summedStoryPoints:0,summedBurnedStoryPoints:0,rank:s[r].fields.customfield_11000};i(e.commit,t,e.callback,o)},params:{commit:t,callback:e.callback}},FAILcallback:{method:o,params:{commit:t,callback:e.callback}}};u.a.dispatch("query",{jql:"project+%3D+SPI+AND+issuetype+%3D+Epic+ORDER+BY+KEY",callback:r})}};n.a.use(c.a),e.a=new c.a.Store({state:l,mutations:p,getters:d,actions:m})},177:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t(171);e.default={data:function(){return{}},computed:{epic_data:function(){return o.a.state.tmp},loading_state_txt:function(){return o.a.getters.status_txt},epics:function(){return o.a.getters.epics},exceptions:function(){return o.a.getters.exceptions}}}},183:function(s,e,t){e=s.exports=t(163)(void 0),e.push([s.i,"",""])},189:function(s,e,t){var o=t(183);"string"==typeof o&&(o=[[s.i,o,""]]),o.locals&&(s.exports=o.locals);t(164)("3ce07eaa",o,!0)},195:function(s,e){s.exports={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[s._v("TEST HOME "),t("br"),s._v(s._s(s.epic_data)+"\n"),t("br"),s._v(s._s(s.loading_state_txt)+"\n"),t("h3",[s._v("Epcis")]),s._v("\n"+s._s(s.epics)+"\n"),t("h3",[s._v("Exceptions")]),s._v("\n"+s._s(s.exceptions)+"\n")])},staticRenderFns:[]}}});